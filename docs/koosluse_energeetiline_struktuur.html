<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Ökosüsteemide toiminine - Koosluste energeetiline struktuur</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./koosluse_kirjeldamine.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./koosluse_energeetiline_struktuur.html"><span class="chapter-title">Koosluste energeetiline struktuur</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Ökosüsteemide toiminine</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Ökosüsteemide toimimine ja kaitse (LTOM.01.006)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Koosluste_struktuur.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Koosluste ja ökosüsteemide struktuur</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./koosluse_kirjeldamine.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Koosluse kirjeldamine</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./koosluse_energeetiline_struktuur.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Koosluste energeetiline struktuur</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#troofiline-püramiid" id="toc-troofiline-püramiid" class="nav-link active" data-scroll-target="#troofiline-püramiid">Troofiline püramiid</a>
  <ul class="collapse">
  <li><a href="#tagurpidine-troofiline-püramiid" id="toc-tagurpidine-troofiline-püramiid" class="nav-link" data-scroll-target="#tagurpidine-troofiline-püramiid">Tagurpidine troofiline püramiid</a></li>
  </ul></li>
  <li><a href="#toiduahela-kontroll" id="toc-toiduahela-kontroll" class="nav-link" data-scroll-target="#toiduahela-kontroll">Toiduahela kontroll</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">Koosluste energeetiline struktuur</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Kooslus saab olla struktureeritud ka energiavoogude mõistes. Primaarprodutsendid assimileerivad päikeseenergia abil süsiniku, mille energia kulgeb herbivooride kaudu näiteks kiskjateni ja lagundajateni.</p>
<p>Elusorganismid moodustavad <strong>biomassi</strong>, mida mõõdetakse kas energia, kuivmassi või süsinikuhulgana pindalaühiku kohta. Enamiku sellest biomassist moodustavad maismaal taimed ja veeökosüsteemides enamasti vetikad, kuna nemad tegelevad primaarproduktsiooniga.</p>
<ul>
<li><p>Koosluse/ökosüsteemi <strong>kogu</strong> <strong>primaarproduktsioon</strong> (<em>GPP;</em> <em>gross primary production</em>)- toodetud biomassi hulk pindalaühiku kohta ajaühikus (nt <span class="math inline">\(kg \times ha^{-1} \times aasta^{-1}\)</span>)</p></li>
<li><p><strong>Netoprimaarproduktsioon</strong> (<em>NPP; net primary production</em>) - kogu primaarproduktsioon miinus autotroofne (taimede/sinivetikate/.. poolt toime pandav) respiratsioon (ehk elutegevuseks kulunud energia)</p></li>
<li><p><strong>Sekundaarproduktsioon</strong> (<em>secondary production</em>) - heterotroofse biomassi kasv pindalaühiku kohta ajaühikus</p></li>
<li><p>Ökosüsteemi <strong>netoproduktsioon</strong> (<em>NEP; net ecosystem production</em>) - kogu primaarproduktsioon miinus kogu respiratsioon</p></li>
</ul>
<p>Need energiavood liiguvad ökosüsteemis troofiliste tasemete kaudu. Mida suurem on primaarproduktsioon, seda suurem on sekundaarproduktsioon, üldreeglina on iga järgmise troofilise taseme produktsioon <span class="math inline">\(\frac{1}{10}\)</span> eelmisest tasemest.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="media/1_10_reegel.PNG" class="img-fluid figure-img" width="527"></p>
<figcaption class="figure-caption">Reeglina on iga troofilise taseme produktsioon 1/10 eelmise taseme produktsioonist</figcaption>
</figure>
</div>
<section id="troofiline-püramiid" class="level2">
<h2 class="anchored" data-anchor-id="troofiline-püramiid">Troofiline püramiid</h2>
<p>1:10 reeglit järgides peaks seega koosluse energeetiline struktuur välja nägema selline:</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="media/troofiline_pyramiid.PNG" class="img-fluid figure-img" width="525"></p>
<figcaption class="figure-caption">Ideaalne troofiline püramiid</figcaption>
</figure>
</div>
<blockquote class="blockquote">
<p><em>„The weight of all predators must always be much lower than that of all food animals, and the total weight of the latter much lower than the plant production“</em></p>
<p>Lindeman 1942</p>
</blockquote>
<p>Siiski leidub ka erandeid.</p>
<section id="tagurpidine-troofiline-püramiid" class="level3">
<h3 class="anchored" data-anchor-id="tagurpidine-troofiline-püramiid">Tagurpidine troofiline püramiid</h3>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><a href="https://doi.org/10.1016/j.cub.2016.05.058"><img src="media/tagurpidine_pyramiid_1.jpg" class="img-fluid figure-img" width="695"></a></p>
<figcaption class="figure-caption">Haide biomass koralliökosüsteemis on sama suur kui saakloomade oma.</figcaption>
</figure>
</div>
<blockquote class="blockquote">
<p>Extreme Inverted Trophic Pyramid of Reef Sharks Supported by Spawning Groupers</p>
<p>Mourier, Johann et al.</p>
<p>Current Biology, Volume 26, Issue 15, 2011 - 2016</p>
</blockquote>
<p>Koralliökosüsteemis on haide biomass tavaolukorras sama suur kui saakloomade oma. Samuti on kehasuuruse ja biomassi suhe positiivne, mis viitaks justkui tagurpidisele troofilisele püramiidile. 1/10 reeglit järgides peaks ju suuremate (mereökosüsteemis eelduslikult kõrgemal troofilisel tasemel olevate) elukate biomass olema väiksem! Kuidas see energia ei kao?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="media/tagurpidine_pyramiid_3.jpg" class="img-fluid figure-img" width="664"></p>
<figcaption class="figure-caption">Haide toiduvajadus (oranž joon) varieerub aasta jooksul, kuid on kohaliku saakloomakoosluse populatsiooni produktsioonist (sinine joon) madalam. Juunis ja juulis rändavad piirkonda aga kudema tulnud kalad, kelle biomass (roheline) joon ületab kõvasti haide toiduvajadust.</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="media/tagurpidine_pyramiid_2.jpg" class="img-fluid figure-img" width="656"></p>
<figcaption class="figure-caption">Kudema tulnud kalad (rohelised) vähendavad kiskja-saaklooma suhet rohkem kui poole võrra, lähenedes normaalsele toidupüramiidile.</figcaption>
</figure>
</div>
<p>Energia kaob muidugi, kuid haid söövad kord aastas kudemiseks kohale rännanud kalasid. Saagi biomass selleks perioodiks mitmekordistub ja toimub <strong>eksogeenne</strong> energia sissevool süsteemi.</p>
<p><span class="math inline">\(\frac{1}{10}\)</span> reeglist hälbimise võimalikke põhjuseid:</p>
<ul>
<li><p>parem energia ülekandeefektiivsus - näiteks parema söödavuse või efektiivsema jahipidamise kaudu</p></li>
<li><p>kiire tarbitava troofilise taseme uuenemiskiirus (<em>turnover</em>)</p></li>
<li><p>mosaiikne kasvukoht - soodustab erinevate ressursside kasutamist-jagamist</p></li>
<li><p>omnivooria - kiskja saab herbivooride taseme osaliselt vahele jätta</p></li>
<li><p>toiduahela produtsentide ja herbivooride “ajalooline kohalolek” - näiteks surnud orgaanilise ainena</p></li>
<li><p>kõrgema troofilise taseme organismide kehasuuruse tõus</p></li>
<li><p>mingisugune alloktoonne [eksogeenne; mujalt pärinev] energi juurdevoog</p></li>
<li><p>herbivooride kõrge mobiilsus - liiguvad “kooslusest” välja toitu otsima</p></li>
</ul>
</section>
</section>
<section id="toiduahela-kontroll" class="level2">
<h2 class="anchored" data-anchor-id="toiduahela-kontroll">Toiduahela kontroll</h2>
<p><em>Kumb ots toiduahelat kontrollib?</em></p>
<p>Toiduahela “kontrollivaks” lüliks võiksime pidada seda troofilist taset, kellest sõltub toiduahela teiste tasemete ohtrus ja/või produktiivsus. Ökoloogias kirjeldatakse kahte paradigmat: <strong>alt-üles (<em>bottom-up</em>) ja ülalt-alla (<em>top-down</em>)</strong> <strong>kontroll</strong>.</p>
<p><strong>Alt-üles</strong> kontrollitud süsteemis sõltub kõrgemate troofiliste tasemete arvukus peamiselt toiduahela esimest lüli piiravatest ressurssidest - näiteks valgus, toitained, vesi. Säärastes süsteemides põhjustab ressursside lisandumine suurema primaarproduktsiooni ja sellest johtuvalt suurema herbivooride → karnivooride → tippkiskjate arvukuse.</p>
<p>Alt-üles kontroll toimib süsteemides või (alam-)toiduahelates, kus tarbijad ei mõjuta (eriti) oma tarbitavaid organisme, näiteks detritivooria (surnud orgaanilisest ainest toitumine) või nektari- ja granivooria (seemnete söömine).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://doi.org/10.1890/0012-9658(2006)87%5B2813:AICREO%5D2.0.CO;2"><img src="media/alt-ules-kontroll.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Meta-analüüsis näidati, et väetamine mõjuhtab küll primaarprodutsente (effect on plants) - ehk ühe taseme piires toimub bottom-up kontroll. See mõju ei kipu aga ei herbivooridele ega kiskjatele edasi kanduma. Borer et al.&nbsp;2006 Ecology</figcaption>
</figure>
</div>
<p>Vastupidiselt ülalmainitule kontrollivad <strong>ülalt-alla</strong> süsteemis tarbijad (peamiselt kiskjad) alamate tasemete ohtrust. Ülalt-alla kontrolli kutsutakse ka troofiliseks kaskaadiks (<em>trophic cascade</em>) - meenutagem näiteks päiskiviliike. Mõju suund primaarprodutsentidele võib sõltuda ka troofiliste tasemete arvust:</p>
<ul>
<li><p>3-tasemeline toiduahel: kiskja kontrollib saaklooma (nt herbivoor) arvukust, kelle ohtruse vähenemine suurendab omakorda viimase ressursi (nt taimed) ohtrust</p></li>
<li><p>4-tasemeline toiduahel: tippkiskja vähendab primaarse kiskja ohtrust, herbivooride arvukus tõuseb, taimede biomass/ohtrus väheneb</p></li>
</ul>
<p><strong>Troofiline kaskaad mereelukate näitel</strong></p>
<p><em>Frank, K. T., Petrie, B., Choi, J. S., &amp; Leggett, W. C. (2005). Trophic Cascades in a Formerly Cod-Dominated Ecosystem. Science, 308(5728), 1621–1623. https://doi.org/10.1126/science.1113075</em></p>
<p>X-teljel on aastad 1965 - 2000.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="media/trof-kaskaad-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Tursa ja teiste sarnaste majanduslikult oluliste kalade väljapüüdmine (must joon - sadamasse jõudnud kalade biomass)</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="media/trof-kaskaad-2.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Väiksemate kalade ja selgrootute arvukuse tõus</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="media/trof-kaskaad-3.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Zooplanktoni arvukuse langus</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="media/trof-kaskaad-4.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Fütoplanktoni ohtruse (roheline joon) tõus; nitraadikontsentratsiooni (punane joon) langus.</figcaption>
</figure>
</div>
<p>Suurte kiskjate (tursk jt) väljapüüdmise tõttu vähenes oluliselt mereökosüsteemide oluline limiteeriv toitaine - lämmastik. <strong>Muutus terve ökosüsteem</strong>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./koosluse_kirjeldamine.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Koosluse kirjeldamine</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>